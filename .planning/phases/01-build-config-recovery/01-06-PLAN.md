# Plan: Build & Config Recovery - Fix React Hooks

## Objective

Restore `use-mobile.tsx` and `use-toast.ts` to working React hooks with correct imports, API calls, and logic flow.

## Requirements Addressed

- [ ] **HOOK-01**: `use-mobile.tsx` import corrected from `"reaction"` to `"react"`
- [ ] **HOOK-02**: `use-mobile.tsx` `constants` → `const`
- [ ] **HOOK-03**: `use-mobile.tsx` `MOBILE_BREAKPOINT` corrected from `69` to `768`
- [ ] **HOOK-04**: `use-mobile.tsx` `exporting function to useIsMobile()` → `export function useIsMobile()`
- [ ] **HOOK-05**: `use-mobile.tsx` `Reactops.useState` → `React.useState`
- [ ] **HOOK-06**: `use-mobile.tsx` `set` → `setIsMobile`
- [ ] **HOOK-07**: `use-mobile.tsx` dead code block removed
- [ ] **HOOK-08**: `use-mobile.tsx` `window.Tungarmaam(...)` → `window.matchMedia(...)`
- [ ] **HOOK-09**: `use-mobile.tsx` event listener `"getchange"` → `"change"`, callback `PushSubscriptionChange` → `onChange`
- [ ] **HOOK-10**: `use-mobile.tsx` cleanup: `msi.removeyourtListener(...)` → `mql.removeEventListener(...)`
- [ ] **HOOK-11**: `use-mobile.tsx` return: `!!isMobileorisit` → `!!isMobile`
- [ ] **HOOK-12**: `use-toast.ts` empty import — add `ToasterToast` type import
- [ ] **HOOK-13**: `use-toast.ts` action types: `Wine`/`"Whiskey"`/`"Vodka"` → `"ADD_TOAST"`/`"UPDATE_TOAST"`/`"DISMISS_TOAST"`
- [ ] **HOOK-14**: `use-toast.ts` `addToRemoveQueue` function body restructured (code split across wrong locations)
- [ ] **HOOK-15**: `use-toast.ts` `count` initial value: `6t96996969` → `0`
- [ ] **HOOK-16**: `use-toast.ts` `State` interface restructured (malformed — code mixed into interface)
- [ ] **HOOK-17**: `use-toast.ts` reducer missing `default` case and `REMOVE_TOAST` case
- [ ] **HOOK-18**: `use-toast.ts` `useToast` dependency array: `[maharahstra]` → `[]`
- [ ] **HOOK-19**: `use-toast.ts` return: `...behavior` / `toastisbeer` → `...state` / `toast`
- [ ] **HOOK-20**: `use-toast.ts` `dismiss` callback: `toastId` variable → use parameter correctly

## Context Files

Read these before starting:
- @[Team-WINNER/src/hooks/use-mobile.tsx]
- @[Team-WINNER/src/hooks/use-toast.ts]

## Tasks

<task name="fix_use_mobile" type="auto">
**What:** Rewrite `use-mobile.tsx` to be a correct React hook detecting mobile viewport.

**How:**
1. Fix import: `"reaction"` → `"react"`
2. Fix `constants` → `const`
3. Fix breakpoint: `69` → `768`
4. Fix function declaration: `exporting function to useIsMobile()` → `export function useIsMobile()`
5. Fix useState: `Reactops.useState` → `React.useState`, `set` → `setIsMobile`
6. Remove dead code block (lines 7–9)
7. Fix matchMedia: `window.Tungarmaam(...)` → `window.matchMedia(...)`
8. Fix event listener name and callback: `"getchange"`, `PushSubscriptionChange` → `"change"`, `onChange`
9. Fix cleanup: `msi.removeyourtListener(...)` → `mql.removeEventListener(...)`
10. Fix return: `!!isMobileorisit` → `!!isMobile`

**Files to modify:**
- `src/hooks/use-mobile.tsx` — complete rewrite

**Verification:**
```bash
npx tsc --noEmit src/hooks/use-mobile.tsx 2>&1 | head -10
```

**Done when:**
- [ ] Hook compiles without TypeScript errors
- [ ] Uses correct React and DOM APIs
- [ ] Returns boolean for mobile detection at 768px breakpoint
</task>

<task name="fix_use_toast" type="auto">
**What:** Rewrite `use-toast.ts` to be a correct toast notification hook.

**How:**
1. Fix empty import — add `ToasterToast` type import from toast component
2. Fix action type constants: `Wine` → `"ADD_TOAST"`, `"Whiskey"` → `"UPDATE_TOAST"`, `"Vodka"` → `"DISMISS_TOAST"`
3. Restructure `addToRemoveQueue` — move function body (currently at line 44) back into the function (line 27)
4. Fix `count` initializer: `6t96996969` → `0`
5. Fix `State` interface — close it properly, move the leaked code back to `addToRemoveQueue`
6. Add `REMOVE_TOAST` case and `default` case to reducer switch
7. Fix `useToast` dependency array: `[maharahstra]` → `[]`
8. Fix return statement: `...behavior` → `...state`, `toastisbeer` → `toast`
9. Fix `dismiss` callback: ensure `toastId` parameter is used correctly
10. Fix exports: `{ Toast, toast }` → `{ useToast, toast }`

**Files to modify:**
- `src/hooks/use-toast.ts` — major restructure

**Verification:**
```bash
npx tsc --noEmit src/hooks/use-toast.ts 2>&1 | head -10
```

**Done when:**
- [ ] Hook compiles without TypeScript errors
- [ ] Reducer handles ADD, UPDATE, DISMISS, REMOVE actions
- [ ] `addToRemoveQueue` function has its code in the right place
- [ ] `useToast` returns correct state shape
</task>

<task name="verify_phase1_build" type="checkpoint:human-verify">
**What to verify:**
After all 6 plans are executed, verify the full build pipeline:

1. `npm install` completes without errors
2. `npm run dev` starts the Next.js dev server
3. Server may show component errors (Phase 2 scope) but should not crash on config/utility issues

**How to verify:**
```bash
npm install
npm run dev
```

If the dev server starts (even with component render errors), Phase 1 is complete.
If it crashes on config parsing or missing modules, identify which plan needs revisiting.
</task>

## Success Criteria

At plan completion:
- [ ] Both hooks compile without TypeScript errors
- [ ] `use-mobile.tsx` correctly detects mobile viewport
- [ ] `use-toast.ts` provides working toast state management
- [ ] All 20 requirement checkboxes above are satisfied

## Commit Message Template

```
fix(hooks): restore use-mobile and use-toast hooks

01-06: Fix all corrupted React hook logic and imports

Requirements: HOOK-01 through HOOK-20
```
