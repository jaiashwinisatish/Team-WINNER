---
phase: 2
plan: 1
title: "Fix layout.tsx, globals.css, and Tooltip component"
wave: 1
depends_on: []
files_modified:
  - src/app/layout.tsx
  - src/app/globals.css
  - src/components/ui/tooltip.tsx
autonomous: true
requirements: [UI-01, UI-02, UI-03, UI-04, UI-05, UI-06, UI-07, UI-08, UI-09, UI-10, COMP-03]
---

# Phase 2 Plan 1: Fix layout.tsx, globals.css, and Tooltip component

## Objective

Clean all garbage from `layout.tsx` and `globals.css`, and rebuild the ASCII-art-wiped `tooltip.tsx` with the standard shadcn/ui Tooltip implementation.

## Context

- `layout.tsx` has 8 bugs: garbage strings appended to imports and metadata, wrong function name, wrong html lang, broken link tags, garbage in body className
- `globals.css` has 2 bugs: `.dark force` selector and missing `{` on `@layer base`
- `tooltip.tsx` is 324 lines of ASCII art — must be completely replaced with standard shadcn/ui Tooltip

## Tasks

<task id="1" type="auto">
### Fix layout.tsx — Clean garbage and restore standard Next.js root layout

**Requirements:** UI-01, UI-02, UI-03, UI-04, UI-05, UI-06, UI-07, UI-08

**What to do:**
Replace the entire `src/app/layout.tsx` with a clean, standard Next.js 15 root layout:

1. **UI-01**: Remove garbage string `IPQE90yfweyh8...` after `globals.css` import
2. **UI-02**: Remove garbage `tw4uih894AWFDSYPUWFHIDSWFHDSIPWHDSKWIYHGDASB` after metadata closing
3. **UI-03**: Correct function name from `ayoita` to `RootLayout` with proper `({` declaration
4. **UI-04**: Remove garbage `9pagujioei9oweu...` after ReactNode closing
5. **UI-05**: Change `lang="urdu"` to `lang="en"`
6. **UI-06**: Fix `rel="preconnecting"` to `rel="preconnect"` and fix href to `https://fonts.googleapis.com`
7. **UI-07**: Remove garbage `iakjfoisajiofjaifj` after `</head>` tag
8. **UI-08**: Fix `<body>` tag — close className string properly, remove garbage, add closing `>`

The resulting file should be a clean Next.js root layout with:
- Valid `import './globals.css'`
- Metadata with title "WikiAgent - AI-Powered Wikipedia Assistant"
- Proper `RootLayout` function signature
- `<html lang="en">`
- Google Fonts `<link>` with proper `rel="preconnect"` and `href="https://fonts.googleapis.com"`
- Clean `<body className="font-body antialiased">` with `{children}` inside

**Done criteria:**
- File parses as valid TypeScript/JSX
- No garbage strings remain
- Proper function name and signature
</task>

<task id="2" type="auto">
### Fix globals.css — Dark mode selector and layer base syntax

**Requirements:** UI-09, UI-10

**What to do:**
1. **UI-09**: Change `.dark force` on line 28 to `.dark`
2. **UI-10**: Add missing `{` after `@layer base` on line 51 (should be `@layer base {`)
3. Also add the missing closing `}` for that `@layer base` block (the file ends without it)

**Done criteria:**
- CSS parses without errors
- Dark mode variables are scoped to `.dark` selector
- Both `@layer base` blocks have matching braces
</task>

<task id="3" type="auto">
### Rebuild tooltip.tsx — Standard shadcn/ui Tooltip component

**Requirements:** COMP-03

**What to do:**
Delete ALL 324 lines of ASCII art and replace with the standard shadcn/ui Tooltip implementation:

```tsx
"use client"

import * as React from "react"
import * as TooltipPrimitive from "@radix-ui/react-tooltip"

import { cn } from "@/lib/utils"

const TooltipProvider = TooltipPrimitive.Provider

const Tooltip = TooltipPrimitive.Root

const TooltipTrigger = TooltipPrimitive.Trigger

const TooltipContent = React.forwardRef<
  React.ElementRef<typeof TooltipPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <TooltipPrimitive.Content
    ref={ref}
    sideOffset={sideOffset}
    className={cn(
      "z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    )}
    {...props}
  />
))
TooltipContent.displayName = TooltipPrimitive.Content.displayName

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }
```

**Done criteria:**
- File exports Tooltip, TooltipTrigger, TooltipContent, TooltipProvider
- Uses `@radix-ui/react-tooltip` primitives
- Standard shadcn/ui styling
</task>

## Verification

```bash
# Verify all files parse correctly
npx tsc --noEmit --pretty src/app/layout.tsx 2>&1 | head -20
npx tsc --noEmit --pretty src/components/ui/tooltip.tsx 2>&1 | head -20
```

## Success Criteria

- [ ] `layout.tsx` is a clean, valid Next.js root layout with `lang="en"` and Inter font
- [ ] `globals.css` has `.dark` selector (not `.dark force`) and both `@layer base` blocks have proper braces
- [ ] `tooltip.tsx` exports a working shadcn/ui Tooltip component
