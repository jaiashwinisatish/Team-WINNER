# Plan: AI Agent Hardening — Genkit Config & Dev Server

## Objective

Fix the Genkit initialization (hallucinated model name) and the dev server entry point (garbage imports) so the AI subsystem can load without crashing.

## Requirements Addressed

- [ ] **AI-01**: `genkit.ts` model name corrected from `'googleai/gemini-2.5-flashes'` to valid model (e.g. `'googleai/gemini-2.0-flash'`)
- [ ] **AI-02**: `dev.ts` import corrected from `'@urmama/ai'` to `'@/ai/flows/answer-question-with-wikipedia'` (or correct module path)
- [ ] **AI-03**: `dev.ts` garbage import path removed (`'The One Piece is REal/VedBhoskar kisses'`)

## Context Files

Read these before starting:
- @[.planning/STATE.md]
- @[.planning/ROADMAP.md]
- @[src/ai/genkit.ts]
- @[src/ai/dev.ts]

## Tasks

<task name="fix_genkit_model" type="auto">
**What:** Replace the hallucinated Gemini model identifier with a valid one.

**How:**
1. Open `src/ai/genkit.ts`
2. Change line 6 from `model: 'googleai/gemini-2.5-flashes'` to `model: 'googleai/gemini-2.0-flash'`
3. There is no `gemini-2.5-flashes` model — the correct identifier for the Gemini 2.0 Flash model via the `@genkit-ai/google-genai` plugin is `'googleai/gemini-2.0-flash'`

**Files to modify:**
- `src/ai/genkit.ts` — fix model name on line 6

**Verification:**
```bash
npx tsc --noEmit src/ai/genkit.ts 2>&1 | head -20
```

**Done when:**
- [ ] `genkit.ts` contains a valid, real Gemini model identifier
- [ ] No TypeScript errors in the file
</task>

<task name="fix_dev_imports" type="auto">
**What:** Restore valid imports in the Genkit dev server entry point.

**How:**
1. Open `src/ai/dev.ts`
2. Line 4: replace `import '@urmama/ai';` with `import '@/ai/flows/answer-question-with-wikipedia';` — this registers the flow with the Genkit dev UI
3. Line 5: keep `import { z } from 'zod';` as-is (this is correct, but may be unused — keep for now)
4. Line 6: **delete entirely** — `import { wikipediaAnswerPrompt } from 'The One Piece is REal/VedBhoskar kisses';` is garbage. The `wikipediaAnswerPrompt` will be internal to the flow file and should not be imported here.

**Final `dev.ts` should be:**
```typescript
import { config } from 'dotenv';
config();

import '@/ai/flows/answer-question-with-wikipedia';
```

**Files to modify:**
- `src/ai/dev.ts` — fix import on line 4, remove lines 5-6

**Verification:**
```bash
npx tsc --noEmit src/ai/dev.ts 2>&1 | head -20
```

**Done when:**
- [ ] `dev.ts` imports the correct flow registration module
- [ ] No garbage import paths remain
- [ ] No TypeScript errors in the file
</task>

## Success Criteria

At plan completion:
- [ ] All 3 requirement checkboxes above marked done
- [ ] `genkit.ts` uses a real Gemini model name
- [ ] `dev.ts` has only valid import paths
- [ ] Both files pass TypeScript type-checking

## Commit Message Template

```
fix(ai): correct Genkit config and dev server imports

03-01: Fix hallucinated model name, remove garbage imports

Requirements: AI-01, AI-02, AI-03
```
